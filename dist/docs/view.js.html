<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: view.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: view.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * View Module
 *
 * @module view
 * @author Ondrej Blazek &lt;oblazek@student.tugraz.at> 
 * @author Cecilia RitzÃ©n &lt;critzen@student.tugraz.at>
 * @requires module:controller
 * @requires Language
 * @requires Widget
 * @requires jQuery
 *
 * @version 1.0.0
 * @license Apache-2.0
 */
ModularMVC.registerView('view', function(Controller, LanguageModule, Widget, $) {

	/* public methods */

	var interFace = {
		/**
		 * onDomReady is triggered by the framework automatically as soon as the DOM is ready (fully loaded).
		 * click events are set
		 *	
		 * @public
		 * @memberOf module:view
		 * @see {@link module:view_setClickEvents}
		 */

		onWidgetReady: function() {
			LanguageModule().translatePage('home');
			_setClickEvents();
		},


		/**
		* 
		* When called the function will display in corresponding DOMs data/pictures - links are taken from the array (json data). 
		* Function as well compares, everytime the button 'Next' is clicked, the selected value of the radio inputs with the value (right answer) taken from the json data. 
		* Based on this the results are updated. 
		* @param array {json} data
		* @param indexOfQuestions {number}
		* @public
		* @memberOf module:view
		*/
		viewPics: function(array, indexOfQuestions) {
			
			$("input:radio[name=radio-choice]").prop("checked", false).checkboxradio( "refresh" );
			$('#head2').text(array.questions[indexOfQuestions].q[0]);
            $('#img_1').attr('src', array.questions[indexOfQuestions].img[0]);  
           	$('#img_2').attr('src', array.questions[indexOfQuestions].img[1]);

           	$('#next').click(function(){
           		if($("input:radio[name=radio-choice]:checked").attr('value')===array.questions[indexOfQuestions].q[1]){
           			//debug('souhlasi');
            		$('#rightAnswers').css("color", "#00ff00");
            		$('#rightAnswers').append((indexOfQuestions+1)+'. Answer correct : '+array.questions[indexOfQuestions].q[1]+'&lt;br>');
          		}
          		else{
          			//debug($("input:radio[name=radio-choice]:checked").attr('value'));
          			//debug('nesouhlasi');
            		$('#wrongAnswers').css("color", "red");
           			$('#wrongAnswers').append((indexOfQuestions+1)+'. Answer incorrect: '+$("input:radio[name=radio-choice]:checked").attr('value')+'&lt;br>');  
          		}

          		$("input:radio[name=radio-choice]").prop("checked", false).checkboxradio( "refresh" );

           		indexOfQuestions++;

				if(indexOfQuestions>0){
					$('#back').show();	
				}
	          	
				if(indexOfQuestions === 41){
					$('#next').hide();
				}
	           	
			    $('#head2').text(array.questions[indexOfQuestions].q[0]);
	            $('#img_1').attr('src', array.questions[indexOfQuestions].img[0]);  
	           	$('#img_2').attr('src', array.questions[indexOfQuestions].img[1]);		
        	});

			$('#back').click(function()
      		{
		        if(indexOfQuestions &lt; 42){
		        	$('#next').show();	
		        }
		          
		        if(indexOfQuestions>=1){
		          indexOfQuestions--;    
		            
		        }
		        if (indexOfQuestions===0){  
		            $('#back').hide(); 
		          }
		        $("input:radio[name=radio-choice]").prop("checked", false).checkboxradio( "refresh" );      
		        $('#head2').text(array.questions[indexOfQuestions].q[0]);
		        $('#img_1').attr('src', array.questions[indexOfQuestions].img[0]);  
		        $('#img_2').attr('src', array.questions[indexOfQuestions].img[1]);   
      		});
		},
		/**
		* 
		* When called the function will change the value of four labels with values taken from the array2 (helper array).
		* The attributes of the radio inputs are updated, everytime 'Next' button is clicked, so they can then be checked for the selected answer.
		* @param array2 {json} data
		* @param indexOfHelperArray {number}
		* @public
		* @memberOf module:view
		*/
		viewLabels: function(array2, indexOfHelperArray) {
			$('label[for=radio1]').html(array2[indexOfHelperArray]);
      		$('label[for=radio2]').html(array2[indexOfHelperArray+1]);
      		$('label[for=radio3]').html(array2[indexOfHelperArray+2]);
		    $('label[for=radio4]').html(array2[indexOfHelperArray+3]);
		    $('#radio1').attr('value', array2[indexOfHelperArray]);
		    $('#radio2').attr('value', array2[indexOfHelperArray+1]);
		    $('#radio3').attr('value', array2[indexOfHelperArray+2]);
		    $('#radio4').attr('value', array2[indexOfHelperArray+3]);

		    $('#next').click(function(){

		    	indexOfHelperArray+=4;
        		$('label[for=radio1]').html(array2[indexOfHelperArray]);
	      		$('label[for=radio2]').html(array2[indexOfHelperArray+1]);
	      		$('label[for=radio3]').html(array2[indexOfHelperArray+2]);
			    $('label[for=radio4]').html(array2[indexOfHelperArray+3]);
			    $('#radio1').attr('value', array2[indexOfHelperArray]);
			    $('#radio2').attr('value', array2[indexOfHelperArray+1]);
			    $('#radio3').attr('value', array2[indexOfHelperArray+2]);
			    $('#radio4').attr('value', array2[indexOfHelperArray+3]);	
        	});

        	$('#back').click(function(){
        		if(indexOfHelperArray>=1){
		          indexOfHelperArray-=4;  
		        }
        		$('label[for=radio1]').html(array2[indexOfHelperArray]);
		        $('label[for=radio2]').html(array2[indexOfHelperArray+1]);
		        $('label[for=radio3]').html(array2[indexOfHelperArray+2]);
		        $('label[for=radio4]').html(array2[indexOfHelperArray+3]);
        	});
		}

		
	},
	/* end of public methods */
	
	
	/* private methods */
	/**
	 * Sets click events for Language Switch button, for Start button and for Results.
	 * If the language switcher is pressed, the widget 'lang' preference will be changed and the '.translatePage'
	 * function from the Language Module will be called so the data are translated and modified, depending on the preference.
	 * The external jquery plugin runner/stopwatch.
	 * @private
	 * @memberOf module:view
	 * @see {@link module:controller.getAppData}
	 * 
	 */
	 //@see {@link https://github.com/jylauril/jquery-runner/ Runner/Stopwatch}
    _setClickEvents = function() {
		//debug('inside click event');
		//debug('View _setClickEvents(): set click event for button#button_show_interests');
		$('#languageSwitch').click(function(){
			if(Widget().getPreference('lang') === "en"){
				Widget().setPreference('lang', 'de');
				location.reload(false);	
			}
			else{
				Widget().setPreference('lang', 'en');
				LanguageModule().translatePage('home');
				location.reload(false);
			}
		});

        $('.starts').click(function(){
        	Controller().getAppData();
        	//debug(Widget().getPreference('lang'));
        	LanguageModule().translatePage('start');
			$('#next').show();
    		$('#setRunner').runner();
    		$('#setRunner').runner('start');	 
        });
        $('#results').click(function(){
        	LanguageModule().translatePage('result');
        	$('#setRunner').runner('stop');
        	$('#getRunner').html('Your time: '+ $('#setRunner').runner('lap'));
        
      	});
      	 

         
    };

	/* end of private methods */
	
	
	
    return interFace;
}(ModularMVC.Controller('controller'), ModularMVC.MVCHelper('Language'), ModularMVC.MVCHelper('Widget'), jQuery));</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-controller.html">controller</a></li><li><a href="module-helper-init.html">helper-init</a></li><li><a href="module-helper-serverapi.html">helper-serverapi</a></li><li><a href="module-model.html">model</a></li><li><a href="module-view.html">view</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Wed Jan 06 2016 18:42:13 GMT+0100 (CET)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
